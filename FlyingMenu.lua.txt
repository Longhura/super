-- Script Bay Si√™u T·ªëc V·ªõi D·ªãch Chuy·ªÉn V√† T·ª± ƒê·ªông K√≠ch Ho·∫°t
-- T·ªëi ∆∞u cho Executor

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local rootPart = character:WaitForChild("HumanoidRootPart")
local camera = workspace.CurrentCamera

-- C·∫•u h√¨nh
local FLYING_ENABLED = false
local AUTO_FLY_ENABLED = true -- T·ª± ƒë·ªông bay khi m√°u th·∫•p
local HEALTH_THRESHOLD = 50 -- Ng∆∞·ª°ng m√°u ƒë·ªÉ t·ª± ƒë·ªông bay (%)
local TELEPORT_HEIGHT = 2000 -- ƒê·ªô cao d·ªãch chuy·ªÉn khi b·∫≠t bay
local NOCLIP_ENABLED = true -- Cho ph√©p xuy√™n qua v·∫≠t c·∫£n
local FLY_SPEED = 500 -- T·ªëc ƒë·ªô bay (r·∫•t nhanh)
local MAX_SPEED = 1000 -- T·ªëc ƒë·ªô t·ªëi ƒëa
local ACCELERATION = 10 -- Gia t·ªëc

-- Bi·∫øn ƒëi·ªÅu khi·ªÉn
local moveDirection = Vector3.new(0, 0, 0)
local currentSpeed = 0
local gyro, bodyVelocity

-- T·∫°o GUI ƒë∆°n gi·∫£n
local gui = Instance.new("ScreenGui")
gui.Name = "SuperFlyGui"
gui.ResetOnSpawn = false
gui.Parent = game:GetService("CoreGui") -- S·ª≠ d·ª•ng CoreGui cho Executor

-- N√∫t bay
local flyButton = Instance.new("TextButton")
flyButton.Name = "FlyButton"
flyButton.Size = UDim2.new(0, 80, 0, 80)
flyButton.Position = UDim2.new(0.1, 0, 0.5, -40)
flyButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
flyButton.Text = "‚úàÔ∏è"
flyButton.TextSize = 35
flyButton.Font = Enum.Font.SourceSansBold
flyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
flyButton.Parent = gui

-- L√†m tr√≤n n√∫t
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(1, 0)
corner.Parent = flyButton

-- Th√™m ƒë∆∞·ªùng vi·ªÅn
local stroke = Instance.new("UIStroke")
stroke.Color = Color3.fromRGB(0, 120, 255)
stroke.Thickness = 3
stroke.Parent = flyButton

-- N√∫t t·ªëc ƒë·ªô
local speedButton = Instance.new("TextButton")
speedButton.Name = "SpeedButton"
speedButton.Size = UDim2.new(0, 80, 0, 80)
speedButton.Position = UDim2.new(0.1, 0, 0.65, 0)
speedButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
speedButton.Text = "üöÄ"
speedButton.TextSize = 35
speedButton.Font = Enum.Font.SourceSansBold
speedButton.TextColor3 = Color3.fromRGB(255, 255, 255)
speedButton.Parent = gui

-- L√†m tr√≤n n√∫t t·ªëc ƒë·ªô
local speedCorner = Instance.new("UICorner")
speedCorner.CornerRadius = UDim.new(1, 0)
speedCorner.Parent = speedButton

-- Th√™m ƒë∆∞·ªùng vi·ªÅn
local speedStroke = Instance.new("UIStroke")
speedStroke.Color = Color3.fromRGB(255, 50, 50)
speedStroke.Thickness = 3
speedStroke.Parent = speedButton

-- Hi·ªÉn th·ªã tr·∫°ng th√°i
local statusLabel = Instance.new("TextLabel")
statusLabel.Name = "StatusLabel"
statusLabel.Size = UDim2.new(0, 200, 0, 30)
statusLabel.Position = UDim2.new(0.5, -100, 0.1, 0)
statusLabel.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
statusLabel.BackgroundTransparency = 0.5
statusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
statusLabel.TextSize = 16
statusLabel.Font = Enum.Font.SourceSansBold
statusLabel.Text = "Bay: T·∫ÆT | T·ªëc ƒë·ªô: " .. FLY_SPEED
statusLabel.Parent = gui

-- L√†m tr√≤n g√≥c
local statusCorner = Instance.new("UICorner")
statusCorner.CornerRadius = UDim.new(0, 10)
statusCorner.Parent = statusLabel

-- H√†m b·∫≠t/t·∫Øt bay
local function toggleFly()
    FLYING_ENABLED = not FLYING_ENABLED
    
    if FLYING_ENABLED then
        -- B·∫≠t bay
        flyButton.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
        statusLabel.Text = "Bay: B·∫¨T | T·ªëc ƒë·ªô: " .. FLY_SPEED
        
        -- D·ªãch chuy·ªÉn l√™n cao
        local targetPosition = rootPart.Position + Vector3.new(0, TELEPORT_HEIGHT, 0)
        rootPart.CFrame = CFrame.new(targetPosition)
        
        -- T·∫°o BodyGyro v√† BodyVelocity
        if gyro then gyro:Destroy() end
        if bodyVelocity then bodyVelocity:Destroy() end
        
        gyro = Instance.new("BodyGyro")
        gyro.Name = "SuperFlyGyro"
        gyro.P = 9e4
        gyro.maxTorque = Vector3.new(9e9, 9e9, 9e9)
        gyro.CFrame = rootPart.CFrame
        gyro.Parent = rootPart
        
        bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.Name = "SuperFlyVelocity"
        bodyVelocity.MaxForce = Vector3.new(9e9, 9e9, 9e9)
        bodyVelocity.Velocity = Vector3.new(0, 0.1, 0)
        bodyVelocity.Parent = rootPart
        
        -- C·∫≠p nh·∫≠t bay
        RunService:BindToRenderStep("SuperFlying", Enum.RenderPriority.Character.Value, function()
            if not FLYING_ENABLED then return end
            
            local lookVector = camera.CFrame.LookVector
            local rightVector = camera.CFrame.RightVector
            
            -- T√≠nh to√°n h∆∞·ªõng bay d·ª±a tr√™n input
            moveDirection = Vector3.new(0, 0, 0)
            
            if UserInputService:IsKeyDown(Enum.KeyCode.W) then
                moveDirection = moveDirection + lookVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.S) then
                moveDirection = moveDirection - lookVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.A) then
                moveDirection = moveDirection - rightVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.D) then
                moveDirection = moveDirection + rightVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
                moveDirection = moveDirection + Vector3.new(0, 1, 0)
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
                moveDirection = moveDirection - Vector3.new(0, 1, 0)
            end
            
            -- TƒÉng/gi·∫£m t·ªëc ƒë·ªô d·∫ßn d·∫ßn
            if moveDirection.Magnitude > 0 then
                moveDirection = moveDirection.Unit
                currentSpeed = math.min(currentSpeed + ACCELERATION, FLY_SPEED)
            else
                currentSpeed = math.max(currentSpeed - ACCELERATION * 2, 0)
            end
            
            -- C·∫≠p nh·∫≠t v·∫≠n t·ªëc
            bodyVelocity.Velocity = moveDirection * currentSpeed
            
            -- C·∫≠p nh·∫≠t h∆∞·ªõng nh√¨n
            if moveDirection.Magnitude > 0 then
                gyro.CFrame = CFrame.lookAt(rootPart.Position, rootPart.Position + moveDirection)
            else
                gyro.CFrame = CFrame.lookAt(rootPart.Position, rootPart.Position + camera.CFrame.LookVector)
            end
        end)
        
        -- B·∫≠t NoClip n·∫øu ƒë∆∞·ª£c y√™u c·∫ßu
        if NOCLIP_ENABLED then
            RunService:BindToRenderStep("NoClip", Enum.RenderPriority.Character.Value + 1, function()
                if not FLYING_ENABLED then return end
                
                for _, part in pairs(character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end)
        end
    else
        -- T·∫Øt bay
        flyButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        statusLabel.Text = "Bay: T·∫ÆT | T·ªëc ƒë·ªô: " .. FLY_SPEED
        
        -- X√≥a BodyGyro v√† BodyVelocity
        RunService:UnbindFromRenderStep("SuperFlying")
        RunService:UnbindFromRenderStep("NoClip")
        
        if gyro then gyro:Destroy() end
        if bodyVelocity then bodyVelocity:Destroy() end
        
        -- ƒê·∫∑t l·∫°i tr·∫°ng th√°i nh√¢n v·∫≠t
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
            end
        end
    end
end

-- H√†m thay ƒë·ªïi t·ªëc ƒë·ªô
local function toggleSpeed()
    if FLY_SPEED == 500 then
        FLY_SPEED = 1000
        speedButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
    elseif FLY_SPEED == 1000 then
        FLY_SPEED = 2000
        speedButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    else
        FLY_SPEED = 500
        speedButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    end
    
    statusLabel.Text = "Bay: " .. (FLYING_ENABLED and "B·∫¨T" or "T·∫ÆT") .. " | T·ªëc ƒë·ªô: " .. FLY_SPEED
end

-- X·ª≠ l√Ω s·ª± ki·ªán n√∫t bay
flyButton.MouseButton1Click:Connect(toggleFly)

-- X·ª≠ l√Ω s·ª± ki·ªán n√∫t t·ªëc ƒë·ªô
speedButton.MouseButton1Click:Connect(toggleSpeed)

-- X·ª≠ l√Ω ph√≠m t·∫Øt
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    if input.KeyCode == Enum.KeyCode.F then
        toggleFly()
    elseif input.KeyCode == Enum.KeyCode.R then
        toggleSpeed()
    end
end)

-- Ki·ªÉm tra m√°u v√† t·ª± ƒë·ªông b·∫≠t bay
RunService.Heartbeat:Connect(function()
    if not AUTO_FLY_ENABLED then return end
    
    local currentHealth = humanoid.Health
    local maxHealth = humanoid.MaxHealth
    local healthPercent = (currentHealth / maxHealth) * 100
    
    if healthPercent <= HEALTH_THRESHOLD and not FLYING_ENABLED then
        toggleFly()
    end
end)

-- X·ª≠ l√Ω khi nh√¢n v·∫≠t ch·∫øt
humanoid.Died:Connect(function()
    FLYING_ENABLED = false
    
    RunService:UnbindFromRenderStep("SuperFlying")
    RunService:UnbindFromRenderStep("NoClip")
    
    if gyro then gyro:Destroy() end
    if bodyVelocity then bodyVelocity:Destroy() end
    
    flyButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    statusLabel.Text = "Bay: T·∫ÆT | T·ªëc ƒë·ªô: " .. FLY_SPEED
end)

-- X·ª≠ l√Ω khi nh√¢n v·∫≠t ƒë∆∞·ª£c t·∫°o l·∫°i
player.CharacterAdded:Connect(function(newCharacter)
    character = newCharacter
    humanoid = character:WaitForChild("Humanoid")
    rootPart = character:WaitForChild("HumanoidRootPart")
    
    FLYING_ENABLED = false
    flyButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    statusLabel.Text = "Bay: T·∫ÆT | T·ªëc ƒë·ªô: " .. FLY_SPEED
    
    -- Thi·∫øt l·∫≠p l·∫°i ki·ªÉm tra m√°u
    humanoid.Died:Connect(function()
        FLYING_ENABLED = false
        
        RunService:UnbindFromRenderStep("SuperFlying")
        RunService:UnbindFromRenderStep("NoClip")
        
        if gyro then gyro:Destroy() end
        if bodyVelocity then bodyVelocity:Destroy() end
        
        flyButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        statusLabel.Text = "Bay: T·∫ÆT | T·ªëc ƒë·ªô: " .. FLY_SPEED
    end)
end)

print("Script bay si√™u t·ªëc ƒë√£ ƒë∆∞·ª£c kh·ªüi t·∫°o!")
print("Nh·∫•n F ƒë·ªÉ b·∫≠t/t·∫Øt bay, R ƒë·ªÉ thay ƒë·ªïi t·ªëc ƒë·ªô")
print("T·ª± ƒë·ªông bay khi m√°u d∆∞·ªõi " .. HEALTH_THRESHOLD .. "%")
