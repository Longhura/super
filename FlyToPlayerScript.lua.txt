-- FlyToPlayerScript.lua
-- A script that allows flying to designated players with various options

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

-- GUI Creation
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "FlyToPlayerGui"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = game.CoreGui

-- Circular Icon (Initially visible)
local CircleIcon = Instance.new("ImageButton")
CircleIcon.Name = "CircleIcon"
CircleIcon.Size = UDim2.new(0, 50, 0, 50)
CircleIcon.Position = UDim2.new(0.9, 0, 0.5, 0)
CircleIcon.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
CircleIcon.BorderSizePixel = 0
CircleIcon.Image = "rbxassetid://3926307971" -- Roblox asset ID for a fly icon
CircleIcon.ImageRectOffset = Vector2.new(324, 364)
CircleIcon.ImageRectSize = Vector2.new(36, 36)
CircleIcon.ImageColor3 = Color3.fromRGB(255, 255, 255)
CircleIcon.Parent = ScreenGui

-- Make the icon circular
local IconCorner = Instance.new("UICorner")
IconCorner.CornerRadius = UDim.new(1, 0)
IconCorner.Parent = CircleIcon

-- Main Frame (Initially hidden)
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 300, 0, 400)
MainFrame.Position = UDim2.new(0.5, -150, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Visible = false
MainFrame.Parent = ScreenGui

-- Title Bar
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 30)
TitleBar.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

local TitleText = Instance.new("TextLabel")
TitleText.Name = "TitleText"
TitleText.Size = UDim2.new(1, -100, 1, 0)
TitleText.Position = UDim2.new(0, 10, 0, 0)
TitleText.BackgroundTransparency = 1
TitleText.Text = "Fly To Player"
TitleText.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleText.TextSize = 18
TitleText.Font = Enum.Font.GothamSemibold
TitleText.TextXAlignment = Enum.TextXAlignment.Left
TitleText.Parent = TitleBar

-- Minimize Button
local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Name = "MinimizeButton"
MinimizeButton.Size = UDim2.new(0, 30, 0, 30)
MinimizeButton.Position = UDim2.new(1, -60, 0, 0)
MinimizeButton.BackgroundTransparency = 1
MinimizeButton.Text = "−"
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.TextSize = 18
MinimizeButton.Font = Enum.Font.GothamSemibold
MinimizeButton.Parent = TitleBar

-- Close Button
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -30, 0, 0)
CloseButton.BackgroundTransparency = 1
CloseButton.Text = "✕"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 18
CloseButton.Font = Enum.Font.GothamSemibold
CloseButton.Parent = TitleBar

-- Content Frame
local ContentFrame = Instance.new("Frame")
ContentFrame.Name = "ContentFrame"
ContentFrame.Size = UDim2.new(1, -20, 1, -40)
ContentFrame.Position = UDim2.new(0, 10, 0, 35)
ContentFrame.BackgroundTransparency = 1
ContentFrame.Parent = MainFrame

-- Fly Toggle
local FlyToggle = Instance.new("Frame")
FlyToggle.Name = "FlyToggle"
FlyToggle.Size = UDim2.new(1, 0, 0, 30)
FlyToggle.BackgroundTransparency = 1
FlyToggle.Parent = ContentFrame

local FlyLabel = Instance.new("TextLabel")
FlyLabel.Name = "FlyLabel"
FlyLabel.Size = UDim2.new(0.7, 0, 1, 0)
FlyLabel.BackgroundTransparency = 1
FlyLabel.Text = "Enable Flying"
FlyLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
FlyLabel.TextSize = 16
FlyLabel.Font = Enum.Font.Gotham
FlyLabel.TextXAlignment = Enum.TextXAlignment.Left
FlyLabel.Parent = FlyToggle

local FlyButton = Instance.new("TextButton")
FlyButton.Name = "FlyButton"
FlyButton.Size = UDim2.new(0.3, -10, 1, -10)
FlyButton.Position = UDim2.new(0.7, 0, 0, 5)
FlyButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
FlyButton.BorderSizePixel = 0
FlyButton.Text = "OFF"
FlyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FlyButton.TextSize = 14
FlyButton.Font = Enum.Font.GothamSemibold
FlyButton.Parent = FlyToggle

-- Speed Input (replacing slider with text input)
local SpeedFrame = Instance.new("Frame")
SpeedFrame.Name = "SpeedFrame"
SpeedFrame.Size = UDim2.new(1, 0, 0, 50)
SpeedFrame.Position = UDim2.new(0, 0, 0, 40)
SpeedFrame.BackgroundTransparency = 1
SpeedFrame.Parent = ContentFrame

local SpeedLabel = Instance.new("TextLabel")
SpeedLabel.Name = "SpeedLabel"
SpeedLabel.Size = UDim2.new(1, 0, 0, 20)
SpeedLabel.BackgroundTransparency = 1
SpeedLabel.Text = "Flight Speed:"
SpeedLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedLabel.TextSize = 16
SpeedLabel.Font = Enum.Font.Gotham
SpeedLabel.TextXAlignment = Enum.TextXAlignment.Left
SpeedLabel.Parent = SpeedFrame

local SpeedInput = Instance.new("TextBox")
SpeedInput.Name = "SpeedInput"
SpeedInput.Size = UDim2.new(1, 0, 0, 30)
SpeedInput.Position = UDim2.new(0, 0, 0, 20)
SpeedInput.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
SpeedInput.BorderSizePixel = 0
SpeedInput.Text = "50"
SpeedInput.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedInput.TextSize = 14
SpeedInput.Font = Enum.Font.Gotham
SpeedInput.Parent = SpeedFrame

-- Noclip Toggle
local NoclipToggle = Instance.new("Frame")
NoclipToggle.Name = "NoclipToggle"
NoclipToggle.Size = UDim2.new(1, 0, 0, 30)
NoclipToggle.Position = UDim2.new(0, 0, 0, 100)
NoclipToggle.BackgroundTransparency = 1
NoclipToggle.Parent = ContentFrame

local NoclipLabel = Instance.new("TextLabel")
NoclipLabel.Name = "NoclipLabel"
NoclipLabel.Size = UDim2.new(0.7, 0, 1, 0)
NoclipLabel.BackgroundTransparency = 1
NoclipLabel.Text = "Pass Through Objects"
NoclipLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
NoclipLabel.TextSize = 16
NoclipLabel.Font = Enum.Font.Gotham
NoclipLabel.TextXAlignment = Enum.TextXAlignment.Left
NoclipLabel.Parent = NoclipToggle

local NoclipButton = Instance.new("TextButton")
NoclipButton.Name = "NoclipButton"
NoclipButton.Size = UDim2.new(0.3, -10, 1, -10)
NoclipButton.Position = UDim2.new(0.7, 0, 0, 5)
NoclipButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
NoclipButton.BorderSizePixel = 0
NoclipButton.Text = "OFF"
NoclipButton.TextColor3 = Color3.fromRGB(255, 255, 255)
NoclipButton.TextSize = 14
NoclipButton.Font = Enum.Font.GothamSemibold
NoclipButton.Parent = NoclipToggle

-- No Stun Toggle (New Feature)
local NoStunToggle = Instance.new("Frame")
NoStunToggle.Name = "NoStunToggle"
NoStunToggle.Size = UDim2.new(1, 0, 0, 30)
NoStunToggle.Position = UDim2.new(0, 0, 0, 140)
NoStunToggle.BackgroundTransparency = 1
NoStunToggle.Parent = ContentFrame

local NoStunLabel = Instance.new("TextLabel")
NoStunLabel.Name = "NoStunLabel"
NoStunLabel.Size = UDim2.new(0.7, 0, 1, 0)
NoStunLabel.BackgroundTransparency = 1
NoStunLabel.Text = "No Stun/Control"
NoStunLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
NoStunLabel.TextSize = 16
NoStunLabel.Font = Enum.Font.Gotham
NoStunLabel.TextXAlignment = Enum.TextXAlignment.Left
NoStunLabel.Parent = NoStunToggle

local NoStunButton = Instance.new("TextButton")
NoStunButton.Name = "NoStunButton"
NoStunButton.Size = UDim2.new(0.3, -10, 1, -10)
NoStunButton.Position = UDim2.new(0.7, 0, 0, 5)
NoStunButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
NoStunButton.BorderSizePixel = 0
NoStunButton.Text = "OFF"
NoStunButton.TextColor3 = Color3.fromRGB(255, 255, 255)
NoStunButton.TextSize = 14
NoStunButton.Font = Enum.Font.GothamSemibold
NoStunButton.Parent = NoStunToggle

-- Continuous Flying Toggle
local ContinuousToggle = Instance.new("Frame")
ContinuousToggle.Name = "ContinuousToggle"
ContinuousToggle.Size = UDim2.new(1, 0, 0, 30)
ContinuousToggle.Position = UDim2.new(0, 0, 0, 180)
ContinuousToggle.BackgroundTransparency = 1
ContinuousToggle.Parent = ContentFrame

local ContinuousLabel = Instance.new("TextLabel")
ContinuousLabel.Name = "ContinuousLabel"
ContinuousLabel.Size = UDim2.new(0.7, 0, 1, 0)
ContinuousLabel.BackgroundTransparency = 1
ContinuousLabel.Text = "Continuous Flying"
ContinuousLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ContinuousLabel.TextSize = 16
ContinuousLabel.Font = Enum.Font.Gotham
ContinuousLabel.TextXAlignment = Enum.TextXAlignment.Left
ContinuousLabel.Parent = ContinuousToggle

local ContinuousButton = Instance.new("TextButton")
ContinuousButton.Name = "ContinuousButton"
ContinuousButton.Size = UDim2.new(0.3, -10, 1, -10)
ContinuousButton.Position = UDim2.new(0.7, 0, 0, 5)
ContinuousButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
ContinuousButton.BorderSizePixel = 0
ContinuousButton.Text = "OFF"
ContinuousButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ContinuousButton.TextSize = 14
ContinuousButton.Font = Enum.Font.GothamSemibold
ContinuousButton.Parent = ContinuousToggle

-- Offset Input
local OffsetFrame = Instance.new("Frame")
OffsetFrame.Name = "OffsetFrame"
OffsetFrame.Size = UDim2.new(1, 0, 0, 70)
OffsetFrame.Position = UDim2.new(0, 0, 0, 220)
OffsetFrame.BackgroundTransparency = 1
OffsetFrame.Parent = ContentFrame

local OffsetLabel = Instance.new("TextLabel")
OffsetLabel.Name = "OffsetLabel"
OffsetLabel.Size = UDim2.new(1, 0, 0, 20)
OffsetLabel.BackgroundTransparency = 1
OffsetLabel.Text = "Position Offset (X, Y, Z)"
OffsetLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
OffsetLabel.TextSize = 16
OffsetLabel.Font = Enum.Font.Gotham
OffsetLabel.TextXAlignment = Enum.TextXAlignment.Left
OffsetLabel.Parent = OffsetFrame

local XInput = Instance.new("TextBox")
XInput.Name = "XInput"
XInput.Size = UDim2.new(0.3, -5, 0, 30)
XInput.Position = UDim2.new(0, 0, 0, 30)
XInput.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
XInput.BorderSizePixel = 0
XInput.Text = "0"
XInput.TextColor3 = Color3.fromRGB(255, 255, 255)
XInput.TextSize = 14
XInput.Font = Enum.Font.Gotham
XInput.Parent = OffsetFrame

local YInput = Instance.new("TextBox")
YInput.Name = "YInput"
YInput.Size = UDim2.new(0.3, -5, 0, 30)
YInput.Position = UDim2.new(0.35, 0, 0, 30)
YInput.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
YInput.BorderSizePixel = 0
YInput.Text = "0"
YInput.TextColor3 = Color3.fromRGB(255, 255, 255)
YInput.TextSize = 14
YInput.Font = Enum.Font.Gotham
YInput.Parent = OffsetFrame

local ZInput = Instance.new("TextBox")
ZInput.Name = "ZInput"
ZInput.Size = UDim2.new(0.3, -5, 0, 30)
ZInput.Position = UDim2.new(0.7, 0, 0, 30)
ZInput.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
ZInput.BorderSizePixel = 0
ZInput.Text = "0"
ZInput.TextColor3 = Color3.fromRGB(255, 255, 255)
ZInput.TextSize = 14
ZInput.Font = Enum.Font.Gotham
ZInput.Parent = OffsetFrame

-- Player List
local PlayerListFrame = Instance.new("Frame")
PlayerListFrame.Name = "PlayerListFrame"
PlayerListFrame.Size = UDim2.new(1, 0, 0, 100)
PlayerListFrame.Position = UDim2.new(0, 0, 0, 300)
PlayerListFrame.BackgroundTransparency = 1
PlayerListFrame.Parent = ContentFrame

local PlayerListLabel = Instance.new("TextLabel")
PlayerListLabel.Name = "PlayerListLabel"
PlayerListLabel.Size = UDim2.new(0.7, 0, 0, 20)
PlayerListLabel.BackgroundTransparency = 1
PlayerListLabel.Text = "Player List"
PlayerListLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
PlayerListLabel.TextSize = 16
PlayerListLabel.Font = Enum.Font.Gotham
PlayerListLabel.TextXAlignment = Enum.TextXAlignment.Left
PlayerListLabel.Parent = PlayerListFrame

local RefreshButton = Instance.new("TextButton")
RefreshButton.Name = "RefreshButton"
RefreshButton.Size = UDim2.new(0.3, -10, 0, 20)
RefreshButton.Position = UDim2.new(0.7, 0, 0, 0)
RefreshButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
RefreshButton.BorderSizePixel = 0
RefreshButton.Text = "Refresh"
RefreshButton.TextColor3 = Color3.fromRGB(255, 255, 255)
RefreshButton.TextSize = 14
RefreshButton.Font = Enum.Font.GothamSemibold
RefreshButton.Parent = PlayerListFrame

local PlayerScrollFrame = Instance.new("ScrollingFrame")
PlayerScrollFrame.Name = "PlayerScrollFrame"
PlayerScrollFrame.Size = UDim2.new(1, 0, 0, 70)
PlayerScrollFrame.Position = UDim2.new(0, 0, 0, 30)
PlayerScrollFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
PlayerScrollFrame.BorderSizePixel = 0
PlayerScrollFrame.ScrollBarThickness = 4
PlayerScrollFrame.ScrollingDirection = Enum.ScrollingDirection.Y
PlayerScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
PlayerScrollFrame.Parent = PlayerListFrame

local PlayerListLayout = Instance.new("UIListLayout")
PlayerListLayout.Name = "PlayerListLayout"
PlayerListLayout.SortOrder = Enum.SortOrder.Name
PlayerListLayout.Padding = UDim.new(0, 2)
PlayerListLayout.Parent = PlayerScrollFrame

-- Variables
local flyEnabled = false
local noclipEnabled = false
local noStunEnabled = false
local continuousEnabled = false
local flySpeed = 50
local selectedPlayer = nil
local flyConnection = nil
local noclipConnection = nil
local noStunConnection = nil

-- Functions
local function updatePlayerList()
    -- Clear existing buttons
    for _, child in pairs(PlayerScrollFrame:GetChildren()) do
        if child:IsA("TextButton") then
            child:Destroy()
        end
    end
    
    -- Add player buttons
    local buttonHeight = 25
    local totalHeight = 0
    
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            local PlayerButton = Instance.new("TextButton")
            PlayerButton.Name = player.Name .. "Button"
            PlayerButton.Size = UDim2.new(1, -8, 0, buttonHeight)
            PlayerButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
            PlayerButton.BorderSizePixel = 0
            PlayerButton.Text = player.Name
            PlayerButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            PlayerButton.TextSize = 14
            PlayerButton.Font = Enum.Font.Gotham
            PlayerButton.Parent = PlayerScrollFrame
            
            PlayerButton.MouseButton1Click:Connect(function()
                selectedPlayer = player
                for _, btn in pairs(PlayerScrollFrame:GetChildren()) do
                    if btn:IsA("TextButton") then
                        if btn == PlayerButton then
                            btn.BackgroundColor3 = Color3.fromRGB(0, 162, 255)
                        else
                            btn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
                        end
                    end
                end
            end)
            
            totalHeight = totalHeight + buttonHeight + 2 -- 2 is the padding
        end
    end
    
    PlayerScrollFrame.CanvasSize = UDim2.new(0, 0, 0, totalHeight)
end

local function toggleFly()
    flyEnabled = not flyEnabled
    
    if flyEnabled then
        FlyButton.Text = "ON"
        FlyButton.BackgroundColor3 = Color3.fromRGB(0, 162, 255)
        
        if flyConnection then
            flyConnection:Disconnect()
        end
        
        local character = LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            local hrp = character.HumanoidRootPart
            
            flyConnection = RunService.Heartbeat:Connect(function()
                if selectedPlayer and selectedPlayer.Character and selectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    local targetHrp = selectedPlayer.Character.HumanoidRootPart
                    local offsetX = tonumber(XInput.Text) or 0
                    local offsetY = tonumber(YInput.Text) or 0
                    local offsetZ = tonumber(ZInput.Text) or 0
                    local targetPosition = targetHrp.Position + Vector3.new(offsetX, offsetY, offsetZ)
                    
                    local direction = (targetPosition - hrp.Position).Unit
                    local distance = (targetPosition - hrp.Position).Magnitude
                    
                    -- Get speed from input
                    local speed = tonumber(SpeedInput.Text) or 50
                    flySpeed = math.clamp(speed, 1, 500)
                    
                    if continuousEnabled or distance > 5 then
                        hrp.Velocity = direction * flySpeed
                    else
                        hrp.Velocity = Vector3.new(0, 0, 0)
                    end
                end
            end)
        end
    else
        FlyButton.Text = "OFF"
        FlyButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
        
        if flyConnection then
            flyConnection:Disconnect()
            flyConnection = nil
        end
        
        local character = LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            character.HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
        end
    end
end

local function toggleNoclip()
    noclipEnabled = not noclipEnabled
    
    if noclipEnabled then
        NoclipButton.Text = "ON"
        NoclipButton.BackgroundColor3 = Color3.fromRGB(0, 162, 255)
        
        if noclipConnection then
            noclipConnection:Disconnect()
        end
        
        noclipConnection = RunService.Stepped:Connect(function()
            local character = LocalPlayer.Character
            if character then
                for _, part in pairs(character:GetDescendants()) do
                    if part:IsA("BasePart") and part.CanCollide then
                        part.CanCollide = false
                    end
                end
            end
        end)
    else
        NoclipButton.Text = "OFF"
        NoclipButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
        
        if noclipConnection then
            noclipConnection:Disconnect()
            noclipConnection = nil
        end
        
        local character = LocalPlayer.Character
        if character then
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
    end
end

local function toggleNoStun()
    noStunEnabled = not noStunEnabled
    
    if noStunEnabled then
        NoStunButton.Text = "ON"
        NoStunButton.BackgroundColor3 = Color3.fromRGB(0, 162, 255)
        
        if noStunConnection then
            noStunConnection:Disconnect()
        end
        
        noStunConnection = RunService.Heartbeat:Connect(function()
            local character = LocalPlayer.Character
            if character then
                local humanoid = character:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    -- Prevent stun by resetting these properties
                    humanoid.PlatformStand = false
                    humanoid.Sit = false
                    
                    -- Reset animation if it's a stun animation
                    if humanoid:GetState() == Enum.HumanoidStateType.Ragdoll or
                       humanoid:GetState() == Enum.HumanoidStateType.Stunned or
                       humanoid:GetState() == Enum.HumanoidStateType.FallingDown then
                        humanoid:ChangeState(Enum.HumanoidStateType.GettingUp)
                    end
                end
            end
        end)
    else
        NoStunButton.Text = "OFF"
        NoStunButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
        
        if noStunConnection then
            noStunConnection:Disconnect()
            noStunConnection = nil
        end
    end
end

local function toggleContinuous()
    continuousEnabled = not continuousEnabled
    
    if continuousEnabled then
        ContinuousButton.Text = "ON"
        ContinuousButton.BackgroundColor3 = Color3.fromRGB(0, 162, 255)
    else
        ContinuousButton.Text = "OFF"
        ContinuousButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    end
end

local function toggleMainFrame()
    MainFrame.Visible = not MainFrame.Visible
    CircleIcon.Visible = not MainFrame.Visible
end

-- Connect events
CircleIcon.MouseButton1Click:Connect(toggleMainFrame)

CloseButton.MouseButton1Click:Connect(function()
    if flyConnection then
        flyConnection:Disconnect()
    end
    if noclipConnection then
        noclipConnection:Disconnect()
    end
    if noStunConnection then
        noStunConnection:Disconnect()
    end
    ScreenGui:Destroy()
end)

MinimizeButton.MouseButton1Click:Connect(toggleMainFrame)

FlyButton.MouseButton1Click:Connect(toggleFly)
NoclipButton.MouseButton1Click:Connect(toggleNoclip)
NoStunButton.MouseButton1Click:Connect(toggleNoStun)
ContinuousButton.MouseButton1Click:Connect(toggleContinuous)
RefreshButton.MouseButton1Click:Connect(updatePlayerList)

-- Speed input validation
SpeedInput.FocusLost:Connect(function(enterPressed)
    local speed = tonumber(SpeedInput.Text)
    if speed then
        flySpeed = math.clamp(speed, 1, 500)
        SpeedInput.Text = tostring(flySpeed)
    else
        SpeedInput.Text = tostring(flySpeed)
    end
end)

-- Initialize
updatePlayerList()

-- Player added/removed events
Players.PlayerAdded:Connect(updatePlayerList)
Players.PlayerRemoving:Connect(updatePlayerList)

-- Make corners rounded
local function makeRounded(instance, radius)
    local uiCorner = Instance.new("UICorner")
    uiCorner.CornerRadius = UDim.new(0, radius)
    uiCorner.Parent = instance
end

makeRounded(MainFrame, 8)
makeRounded(TitleBar, 8)
makeRounded(FlyButton, 4)
makeRounded(NoclipButton, 4)
makeRounded(NoStunButton, 4)
makeRounded(ContinuousButton, 4)
makeRounded(SpeedInput, 4)
makeRounded(XInput, 4)
makeRounded(YInput, 4)
makeRounded(ZInput, 4)
makeRounded(RefreshButton, 4)
makeRounded(PlayerScrollFrame, 4)

